<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Slice 0001 · Task Board</title>
    <link rel="stylesheet" href="styles.part1.css" />
    <link rel="stylesheet" href="styles.part2.css" />
  </head>
  <body data-repo-provider="azure">
    <div class="page">
      <header class="app-header">
        <div>
          <p class="eyebrow">Slice 0001</p>
          <h1>Local Task Board</h1>
          <p class="subtitle">Capture work fast. Everything stays on this device.</p>
        </div>
        <div class="header-actions">
          <button class="ghost" id="open-connect" type="button">Pair Device</button>
          <button class="primary" id="open-modal" type="button">Create Task</button>
        </div>
      </header>

      <section class="activity-panel" id="agent-activity" aria-labelledby="activity-title">
        <div class="activity-header">
          <div>
            <p class="eyebrow">Agent Activity</p>
            <h2 id="activity-title">Task status updates</h2>
            <p class="subtitle">Simulate attempt start, review, and merge events.</p>
          </div>
          <div class="activity-actions">
            <button class="ghost" id="activity-start" type="button">Start Attempt</button>
            <button class="ghost" id="activity-complete" type="button">Complete Attempt</button>
            <button class="ghost" id="activity-merge" type="button">Merge Task</button>
            <button class="secondary" id="activity-pr" type="button">Create PR</button>
          </div>
        </div>
        <div class="activity-meta">
          <span class="activity-label">Tracking</span>
          <span id="activity-task-title">No active task</span>
        </div>
        <div class="activity-log" id="activity-log" role="list"></div>
      </section>

      <section class="task-view-panel" id="task-view" data-state="closed" aria-labelledby="task-view-title">
        <div class="task-view-header">
          <div>
            <p class="eyebrow">Task View</p>
            <h2 id="task-view-title">Execution log stream</h2>
            <p class="subtitle">Watch live agent actions and responses as they arrive.</p>
          </div>
          <div class="task-view-actions">
            <button class="ghost" id="open-task-view" type="button">Open task view</button>
            <button class="secondary" id="pause-task-stream" type="button">Pause stream</button>
            <button class="danger" id="stop-task-attempt" type="button">Stop</button>
            <button class="ghost" id="open-processes" type="button">View Processes</button>
          </div>
        </div>
        <div class="task-view-meta">
          <div class="task-view-meta-left">
            <span class="task-view-label">Attempt</span>
            <span id="task-view-attempt">No attempt selected</span>
          </div>
          <span class="task-view-status" id="task-view-status" role="status">Idle</span>
        </div>
        <div
          class="task-log-stream"
          id="task-log-stream"
          role="log"
          aria-live="polite"
          aria-relevant="additions"
        >
          <div class="empty">Open the task view to stream live logs.</div>
        </div>

        <div class="task-process-panel" id="process-panel" data-state="closed" aria-labelledby="process-panel-title">
          <div class="task-process-header">
            <div>
              <p class="eyebrow">Processes</p>
              <h3 id="process-panel-title">Attempt processes</h3>
              <p class="subtitle">Inspect the processes running inside the attempt.</p>
            </div>
            <div class="task-process-meta">
              <span class="task-process-status" id="process-panel-status">Hidden</span>
            </div>
          </div>
          <div class="task-process-body">
            <div class="process-list" id="process-list" role="list"></div>
            <div class="process-log-viewer" id="process-log-viewer">
              <div class="process-log-header">
                <span class="task-view-label">Selected process</span>
                <span id="process-log-title">Select a process</span>
              </div>
              <div
                class="process-log-entries"
                id="process-log-entries"
                role="log"
                aria-live="polite"
                aria-relevant="additions"
              >
                <div class="empty">Select a process to view logs.</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="devices-panel" id="devices-panel" aria-labelledby="devices-title">
        <div class="devices-header">
          <div>
            <p class="eyebrow">Devices</p>
            <h2 id="devices-title">Paired computers</h2>
            <p class="subtitle" id="pairing-status">No devices paired yet.</p>
          </div>
          <button class="secondary" id="open-pairing" type="button">Pair another computer</button>
        </div>
        <div class="device-list" id="device-list" role="list"></div>
      </section>

      <section class="settings-panel" id="settings-panel" aria-labelledby="settings-title">
        <div class="settings-header">
          <div>
            <p class="eyebrow">Settings</p>
            <h2 id="settings-title">Integrations</h2>
            <p class="subtitle">Connect CLI assistants for faster task prompts.</p>
          </div>
        </div>
        <div class="integration-grid">
          <article class="integration-card" data-provider="copilot-cli">
            <div>
              <h3>Copilot CLI</h3>
              <p class="integration-copy">Use Copilot CLI to power task prompt autocomplete.</p>
              <div class="integration-meta">
                <span class="integration-status" id="copilot-status">Ready to connect</span>
                <span class="integration-pill" id="copilot-pill">Available</span>
              </div>
              <p class="integration-instructions" id="copilot-instructions" data-state="hidden"></p>
            </div>
            <label class="integration-toggle">
              <input id="copilot-toggle" type="checkbox" />
              <span>Enable</span>
            </label>
          </article>
        </div>
      </section>

      <section class="search-panel" aria-label="Search tasks">
        <div class="search-content">
          <div>
            <p class="eyebrow">Search</p>
            <h2>Find tasks fast</h2>
            <p class="subtitle">Filter by title or description.</p>
          </div>
          <div class="search-input">
            <label class="search-label" for="task-search">Search tasks</label>
            <input id="task-search" name="search" type="search" placeholder="Search tasks" autocomplete="off" />
          </div>
        </div>
      </section>

      <main class="board">
        <section class="column" aria-labelledby="todo-title">
          <div class="column-header">
            <div>
              <h2 id="todo-title">To Do</h2>
              <p class="column-meta"><span id="todo-count">0</span> tasks</p>
            </div>
            <span class="pill">Local only</span>
          </div>
          <div class="task-list" id="todo-list" role="list"></div>
        </section>
        <section class="column" aria-labelledby="in-progress-title">
          <div class="column-header">
            <div>
              <h2 id="in-progress-title">In Progress</h2>
              <p class="column-meta"><span id="in-progress-count">0</span> tasks</p>
            </div>
            <span class="pill pill-progress">Active</span>
          </div>
          <div class="task-list" id="in-progress-list" role="list"></div>
        </section>
        <section class="column" aria-labelledby="in-review-title">
          <div class="column-header">
            <div>
              <h2 id="in-review-title">In Review</h2>
              <p class="column-meta"><span id="in-review-count">0</span> tasks</p>
            </div>
            <span class="pill pill-review">Review</span>
          </div>
          <div class="task-list" id="in-review-list" role="list"></div>
        </section>
        <section class="column" aria-labelledby="done-title">
          <div class="column-header">
            <div>
              <h2 id="done-title">Done</h2>
              <p class="column-meta"><span id="done-count">0</span> tasks</p>
            </div>
            <span class="pill pill-muted">Complete</span>
          </div>
          <div class="task-list" id="done-list" role="list"></div>
        </section>
      </main>
    </div>

    <div class="modal" id="task-modal" aria-hidden="true">
      <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-header">
          <div>
            <p class="eyebrow">Create Task</p>
            <h3 id="modal-title">Add something to ship</h3>
          </div>
          <button class="icon-button" id="close-modal" type="button" aria-label="Close">
            ✕
          </button>
        </div>

        <form id="task-form" novalidate>
          <label class="field">
            <span>Title</span>
            <input
              id="task-title"
              name="title"
              type="text"
              maxlength="120"
              placeholder="Give it a clear title"
              aria-describedby="title-error"
              required
            />
            <span class="helper" id="title-error" role="alert"></span>
          </label>

          <label class="field">
            <span>Description</span>
            <textarea id="task-description" name="description" rows="4" maxlength="500" placeholder="Optional details"></textarea>
          </label>

          <div class="assistant-panel" id="assistant-panel">
            <div class="assistant-header">
              <div>
                <p class="assistant-label">AI CLI assistant</p>
                <p class="assistant-hint">Generate quick task instructions for the agent.</p>
              </div>
              <label class="assistant-toggle">
                <input id="assistant-toggle" type="checkbox" />
                <span>Enable</span>
              </label>
            </div>
            <label class="assistant-field">
              <span class="assistant-field-label">Assistant</span>
              <select id="assistant-provider">
                <option value="templates">Template assistant</option>
                <option value="copilot-cli" disabled>Copilot CLI</option>
              </select>
            </label>
            <div class="assistant-actions">
              <button class="ghost" id="assistant-suggest" type="button" disabled>
                Suggest instructions
              </button>
            </div>
            <div
              class="assistant-suggestions"
              id="assistant-suggestions"
              role="list"
              aria-live="polite"
            ></div>
          </div>

          <div class="modal-actions">
            <button class="ghost" id="cancel-modal" type="button">Cancel</button>
            <button class="secondary" id="create-task" type="submit" data-action="create">
              Create
            </button>
            <button class="primary" id="create-start" type="submit" data-action="create-start">
              Create &amp; Start
            </button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal" id="connect-modal" aria-hidden="true">
      <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="connect-title">
        <div class="modal-header">
          <div>
            <p class="eyebrow">Connect Mobile</p>
          <h3 id="connect-title">Scan the QR code to pair this computer</h3>
        </div>
          <button class="icon-button" id="close-connect" type="button" aria-label="Close">
            ✕
          </button>
        </div>
        <p class="modal-copy">
          Use the mobile app to approve this device. The QR code opens a secure pairing request and
          includes a fallback link if you need to copy it instead.
        </p>
        <div class="qr-shell">
          <div class="qr-code" id="qr-code" aria-label="QR code for mobile view"></div>
          <div class="qr-details">
            <span class="qr-label">Fallback link</span>
            <div class="qr-link">
              <input id="pairing-link" type="text" readonly />
              <button class="ghost" id="copy-link" type="button">Copy link</button>
            </div>
            <p class="qr-hint">Open the link in the mobile app to approve pairing.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="pr-modal" aria-hidden="true">
      <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="pr-modal-title">
        <div class="modal-header">
          <div>
            <p class="eyebrow" id="pr-provider-label">GitHub</p>
            <h3 id="pr-modal-title">Create pull request</h3>
          </div>
          <button class="icon-button" id="close-pr" type="button" aria-label="Close">
            ✕
          </button>
        </div>
        <p class="modal-copy">Review the draft and choose where to merge.</p>
        <p class="modal-copy" id="github-cli-instructions" role="alert" hidden></p>
        <p class="modal-copy" id="azure-cli-instructions" role="alert" hidden></p>
        <p class="modal-copy" id="azure-repo-unsupported" role="alert" hidden></p>

        <form id="pr-form" novalidate>
          <label class="field">
            <span>Title</span>
            <input id="pr-title" name="title" type="text" maxlength="160" />
          </label>

          <label class="field">
            <span>Description</span>
            <textarea id="pr-description" name="description" rows="4" maxlength="1000"></textarea>
          </label>

          <label class="field">
            <span>Base branch</span>
            <select id="pr-base-branch" name="base">
              <option value="main">main</option>
              <option value="develop">develop</option>
              <option value="release">release</option>
              <option value="staging">staging (missing)</option>
            </select>
            <span class="helper" id="pr-base-branch-error" role="alert" hidden></span>
          </label>

          <div class="modal-actions">
            <button class="ghost" id="cancel-pr" type="button">Cancel</button>
            <button class="primary" id="submit-pr" type="submit">Create PR</button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal" id="review-modal" aria-hidden="true" data-review-view="summary" data-diff-mode="inline">
      <div class="modal-card modal-card--wide" role="dialog" aria-modal="true" aria-labelledby="review-title">
        <div class="modal-header">
          <div>
            <p class="eyebrow">Code Review</p>
            <h3 id="review-title">Review task changes</h3>
            <p class="subtitle" id="review-task-meta">Select a task to review.</p>
          </div>
          <button class="icon-button" id="close-review" type="button" aria-label="Close">
            ✕
          </button>
        </div>
        <div class="review-tabs" role="tablist" aria-label="Review views">
          <button class="review-tab" id="review-summary-tab" type="button" role="tab" aria-selected="true" data-view="summary">
            Summary
          </button>
          <button class="review-tab" id="review-diff-tab" type="button" role="tab" aria-selected="false" data-view="diff">
            Diff view
          </button>
        </div>
        <section class="review-panel" data-review-panel="summary">
          <div class="review-summary">
            <p class="review-summary-title" id="review-summary-title">No task selected</p>
            <p class="review-summary-copy" id="review-summary-copy">Open the diff view to inspect file changes.</p>
          </div>
        </section>
        <section class="review-panel" data-review-panel="diff">
          <div class="diff-toolbar">
            <div class="diff-toggle" role="group" aria-label="Diff layout">
              <button class="diff-toggle-button" id="diff-inline" type="button" aria-pressed="true" data-mode="inline">
                Inline
              </button>
              <button class="diff-toggle-button" id="diff-split" type="button" aria-pressed="false" data-mode="split">
                Split
              </button>
            </div>
            <span class="diff-meta" id="diff-view-label">Inline view</span>
          </div>
          <div class="diff-file-list" id="diff-file-list" role="list"></div>
          <div class="review-comments" id="review-comments">
            <div class="review-comments-header">
              <h4>Review comments</h4>
              <span class="review-comments-count" id="review-comment-count">0</span>
            </div>
            <div class="review-comment-list" id="review-comment-list" role="list"></div>
            <div class="review-actions">
              <button class="primary" id="review-send" type="button">Send</button>
              <p class="review-send-hint" id="review-send-hint" role="status">Add at least one comment before sending feedback.</p>
            </div>
          </div>
        </section>
      </div>
    </div>

    <script src="vendor/qrcode.min.js"></script>
    <script src="app.part1.js"></script>
    <script src="app.part2.js"></script>
  </body>
</html>
